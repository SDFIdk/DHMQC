language: python

python:
  - "2.7"

# This is not an ideal solution. Forces travis to use system Python instead of
# virtuelenv's. Problem is that GDAL is rather difficult to install into the
# virtualenv's. This will not work with Python3!
virtualenv:
    system_site_packages: true

before_install:
  - sudo apt-get remove -y libgdal1
  - sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable -y
  - sudo apt-get update
  - sudo apt-get install gdal-bin
  - sudo apt-get install libgdal-dev
  - sudo apt-get install python-gdal
#  - export CPLUS_INCLUDE_PATH=/usr/include/gdal
#  - export C_INCLUDE_PATH=/usr/include/gdal
  - gdal-config --version
  - python -c "import gdal"
  - pip install numpy
  - pip install scipy
  - pip install pandas
#  - pip install gdal
  - pip install laspy
  - pip install patch

script:
  - python src/build/build.py -x64
  - python test_suite.py


after_failure:
  - cat test_output/*.log
